<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>Writing specs</title>

<link rel="icon" href="/favicon.ico">
<link rel="stylesheet" media="all" href="/assets/stylesheets/application.css" data-proofer-ignore>

<link rel="stylesheet" media="all" href="/assets/stylesheets/development.css" data-proofer-ignore>



<script type="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript" src="/assets/javascripts/application.js"></script>


  </head>
  <body class="layout-article">
    <div class="footer-push">
      <div class="top-bar">
  <div class="wrapper no-pad">

    <ul class="navigation">
      <li><h1 title="Atom: A hackable text editor for the 21st Century"><a href="https://atom.io/" class="logo-small"></a></h1></li>
      <li><a href="https://atom.io/packages">Packages</a></li>
      <li><a href="https://atom.io/themes">Themes</a></li>
      <li><a href="https://atom.io/docs" class="is-selected">Documentation</a></li>
      <li><a href="https://blog.atom.io">Blog</a></li>
      <li><a href="https://discuss.atom.io">Discuss</a></li>
    </ul>

  </div>
</div>

      <div class="wrapper documents content-push wide">
        <div class="documents-search">
  <form accept-charset="UTF-8" action="/search" id="articles-search" method="get">
    <input type="search" name="q" id="quicksearch-query" class="documents-search-input js-articles-quicksearch" placeholder="Search the Flight Manual" autocomplete="off">
  </form>
</div>

<script>
  docsearch({
    apiKey: '3de069f81859549c4161e184d059124c',
    indexName: 'atom_flight_manual',
    inputSelector: '#quicksearch-query',
    debug: true,
  });
</script>


        <div class="toc">
          


  <h4>
    <a href="/getting-started">Chapter 1: Getting Started</a>
  </h4>
  <ul>
    
      <li class="unselected">
        <a href="/getting-started/sections/why-atom">Why Atom?</a>
      </li>
    
      <li class="unselected">
        <a href="/getting-started/sections/installing-atom">Installing Atom</a>
      </li>
    
      <li class="unselected">
        <a href="/getting-started/sections/atom-basics">Atom Basics</a>
      </li>
    
      <li class="unselected">
        <a href="/getting-started/sections/summary">Summary</a>
      </li>
    
  </ul>

  <h4>
    <a href="/using-atom">Chapter 2: Using Atom</a>
  </h4>
  <ul>
    
      <li class="unselected">
        <a href="/using-atom/sections/atom-packages">Atom Packages</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/moving-in-atom">Moving in Atom</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/atom-selections">Atom Selections</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/editing-and-deleting-text">Editing and Deleting Text</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/find-and-replace">Find and Replace</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/snippets">Snippets</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/autocomplete">Autocomplete</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/folding">Folding</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/panes">Panes</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/pending-pane-items">Pending Pane Items</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/grammar">Grammar</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/version-control-in-atom">Version Control in Atom</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/github-package">GitHub package</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/writing-in-atom">Writing in Atom</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/basic-customization">Basic Customization</a>
      </li>
    
      <li class="unselected">
        <a href="/using-atom/sections/summary">Summary</a>
      </li>
    
  </ul>

  <h4>
    <a href="/hacking-atom">Chapter 3: Hacking Atom</a>
  </h4>
  <ul>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/tools-of-the-trade">Tools of the Trade</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/the-init-file">The Init File</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/package-word-count">Package: Word Count</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/package-modifying-text">Package: Modifying Text</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/package-active-editor-info">Package: Active Editor Info</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/creating-a-theme">Creating a Theme</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/creating-a-grammar">Creating a Grammar</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/creating-a-legacy-textmate-grammar">Creating a Legacy TextMate Grammar</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/publishing">Publishing</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/iconography">Iconography</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/debugging">Debugging</a>
      </li>
    
      <li class="selected">
        <a href="/hacking-atom/sections/writing-specs">Writing specs</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/handling-uris">Handling URIs</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/cross-platform-compatibility">Cross-Platform Compatibility</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/converting-from-textmate">Converting from TextMate</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/hacking-on-atom-core">Hacking on Atom Core</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/contributing-to-official-atom-packages">Contributing to Official Atom Packages</a>
      </li>
    
      <li class="unselected">
        <a href="/hacking-atom/sections/summary">Summary</a>
      </li>
    
  </ul>

  <h4>
    <a href="/behind-atom">Chapter 4: Behind Atom</a>
  </h4>
  <ul>
    
      <li class="unselected">
        <a href="/behind-atom/sections/configuration-api">Configuration API</a>
      </li>
    
      <li class="unselected">
        <a href="/behind-atom/sections/keymaps-in-depth">Keymaps In-Depth</a>
      </li>
    
      <li class="unselected">
        <a href="/behind-atom/sections/scoped-settings-scopes-and-scope-descriptors">Scoped Settings, Scopes and Scope Descriptors</a>
      </li>
    
      <li class="unselected">
        <a href="/behind-atom/sections/serialization-in-atom">Serialization in Atom</a>
      </li>
    
      <li class="unselected">
        <a href="/behind-atom/sections/developing-node-modules">Developing Node Modules</a>
      </li>
    
      <li class="unselected">
        <a href="/behind-atom/sections/interacting-with-other-packages-via-services">Interacting With Other Packages Via Services</a>
      </li>
    
      <li class="unselected">
        <a href="/behind-atom/sections/maintaining-your-packages">Maintaining Your Packages</a>
      </li>
    
      <li class="unselected">
        <a href="/behind-atom/sections/how-atom-uses-chromium-snapshots">How Atom Uses Chromium Snapshots</a>
      </li>
    
      <li class="unselected">
        <a href="/behind-atom/sections/summary">Summary</a>
      </li>
    
  </ul>



  <h4>
    <a href="/resources">Appendix A: Resources</a>
  </h4>
  <ul>
    
      <li class="unselected">
        <a href="/resources/sections/glossary">Glossary</a>
      </li>
    
  </ul>

  <h4>
    <a href="/shadow-dom">Appendix B: Shadow DOM</a>
  </h4>
  <ul>
    
      <li class="unselected">
        <a href="/shadow-dom/sections/removing-shadow-dom-styles">Removing Shadow DOM styles</a>
      </li>
    
  </ul>

  <h4>
    <a href="/upgrading-to-1-0-apis">Appendix C: Upgrading to 1.0 APIs</a>
  </h4>
  <ul>
    
      <li class="unselected">
        <a href="/upgrading-to-1-0-apis/sections/upgrading-your-package">Upgrading Your Package</a>
      </li>
    
      <li class="unselected">
        <a href="/upgrading-to-1-0-apis/sections/upgrading-your-ui-theme-or-package-selectors">Upgrading Your UI Theme Or Package Selectors</a>
      </li>
    
      <li class="unselected">
        <a href="/upgrading-to-1-0-apis/sections/upgrading-your-syntax-theme">Upgrading Your Syntax Theme</a>
      </li>
    
  </ul>

  <h4>
    <a href="/atom-server-side-apis">Appendix D: Atom server-side APIs</a>
  </h4>
  <ul>
    
      <li class="unselected">
        <a href="/atom-server-side-apis/sections/atom-package-server-api">Atom package server API</a>
      </li>
    
      <li class="unselected">
        <a href="/atom-server-side-apis/sections/atom-update-server-api">Atom update server API</a>
      </li>
    
  </ul>


        </div>

        
        <h1 class="document-title">
          <div id="platform-nav">
  <span class="octicon octicon-device-desktop"></span>
  <ul>
    <li class="platform-mac">
      <a href="#platform-mac" data-platform="mac">
        mac
      </a>
    </li>
    <li class="platform-windows">
      <a href="#platform-windows" data-platform="windows">
        windows
      </a>
    </li>
    <li class="platform-linux">
      <a href="#platform-linux" data-platform="linux">
        linux
      </a>
    </li>
  </ul>
</div>

          <a class="improve-link"
              href="https://github.com/atom/flight-manual.atom.io/edit/master/content/hacking-atom/sections/writing-specs.md" data-proofer-ignore>
            <span class="octicon octicon-pencil"></span> Improve this page
          </a>
        </h1>

        <div class="markdown-body document-content">
          
          <h3>
<a id="writing-specs" class="anchor" href="#writing-specs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing Specs</h3>

<p>We've looked at and written a few specs through the examples already. Now it's time to take a closer look at the spec framework itself. How exactly do you write tests in Atom?</p>

<p>Atom uses <a href="https://jasmine.github.io/1.3/introduction.html">Jasmine</a> as its spec framework. Any new functionality should have specs to guard against regressions.</p>

<h4>
<a id="create-a-new-spec" class="anchor" href="#create-a-new-spec" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a New Spec</h4>

<p><a href="https://github.com/atom/atom/tree/master/spec">Atom specs</a> and <a href="https://github.com/atom/markdown-preview/tree/master/spec">package specs</a> are added to their respective <code>spec</code> directory. The example below creates a spec for Atom core.</p>

<h5>
<a id="create-a-spec-file" class="anchor" href="#create-a-spec-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a Spec File</h5>

<p>Spec files <strong>must</strong> end with <code>-spec</code> so add <code>sample-spec.coffee</code> to the <code>spec</code> directory.</p>

<h5>
<a id="add-one-or-more-describe-methods" class="anchor" href="#add-one-or-more-describe-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add One or More <code>describe</code> Methods</h5>

<p>The <code>describe</code> method takes two arguments, a description and a function. If the description explains a behavior it typically begins with <code>when</code>; if it is more like a unit test it begins with the method name.</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"when a test is written"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="c1"># contents</span>
</code></pre></div>

<p>or</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"Editor::moveUp"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="c1"># contents</span>
</code></pre></div>

<h5>
<a id="add-one-or-more-it-methods" class="anchor" href="#add-one-or-more-it-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add One or More <code>it</code> Methods</h5>

<p>The <code>it</code> method also takes two arguments, a description and a function. Try and make the description flow with the <code>it</code> method. For example, a description of "this should work" doesn't read well as "it this should work". But a description of "should work" sounds great as "it should work".</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"when a test is written"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">it</span> <span class="s">"has some expectations that should pass"</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="c1"># Expectations</span>
</code></pre></div>

<h5>
<a id="add-one-or-more-expectations" class="anchor" href="#add-one-or-more-expectations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add One or More Expectations</h5>

<p>The best way to learn about expectations is to read the <a href="https://jasmine.github.io/1.3/introduction.html#section-Expectations">Jasmine documentation</a> about them. Below is a simple example.</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"when a test is written"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">it</span> <span class="s">"has some expectations that should pass"</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">expect</span><span class="p">(</span><span class="s">"apples"</span><span class="p">).</span><span class="na">toEqual</span><span class="p">(</span><span class="s">"apples"</span><span class="p">)</span>
    <span class="nx">expect</span><span class="p">(</span><span class="s">"oranges"</span><span class="p">).</span><span class="na">not</span><span class="p">.</span><span class="na">toEqual</span><span class="p">(</span><span class="s">"apples"</span><span class="p">)</span>
</code></pre></div>

<h6>
<a id="custom-matchers" class="anchor" href="#custom-matchers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom Matchers</h6>

<p>In addition to the Jasmine's built-in matchers, Atom includes the following:</p>

<ul>
<li><a href="https://github.com/velesin/jasmine-jquery">jasmine-jquery</a></li>
<li>The <code>toBeInstanceOf</code> matcher is for the <code>instanceof</code> operator</li>
<li>The <code>toHaveLength</code> matcher compares against the <code>.length</code> property</li>
<li>The <code>toExistOnDisk</code> matcher checks if the file exists in the filesystem</li>
<li>The <code>toHaveFocus</code> matcher checks if the element currently has focus</li>
<li>The <code>toShow</code> matcher tests if the element is visible in the dom</li>
</ul>

<p>These are defined in <a href="https://github.com/atom/atom/blob/master/spec/spec-helper.coffee">spec/spec-helper.coffee</a>.</p>

<h4>
<a id="asynchronous-specs" class="anchor" href="#asynchronous-specs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Asynchronous Specs</h4>

<p>Writing Asynchronous specs can be tricky at first. Some examples.</p>

<h5>
<a id="promises" class="anchor" href="#promises" aria-hidden="true"><span class="octicon octicon-link"></span></a>Promises</h5>

<p>Working with promises is rather easy in Atom. You can use our <code>waitsForPromise</code> function.</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"when we open a file"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">it</span> <span class="s">"should be opened in an editor"</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">waitsForPromise</span> <span class="o">-&gt;</span>
      <span class="nx">atom</span><span class="p">.</span><span class="na">workspace</span><span class="p">.</span><span class="na">open</span><span class="p">(</span><span class="s">'c.coffee'</span><span class="p">).</span><span class="na">then</span> <span class="p">(</span><span class="nx">editor</span><span class="p">)</span> <span class="o">-&gt;</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">editor</span><span class="p">.</span><span class="na">getPath</span><span class="p">()).</span><span class="na">toContain</span> <span class="s">'c.coffee'</span>
</code></pre></div>

<p>This method can be used in the <code>describe</code>, <code>it</code>, <code>beforeEach</code> and <code>afterEach</code> functions.</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"when we open a file"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">beforeEach</span> <span class="o">-&gt;</span>
    <span class="nx">waitsForPromise</span> <span class="o">-&gt;</span>
      <span class="nx">atom</span><span class="p">.</span><span class="na">workspace</span><span class="p">.</span><span class="na">open</span> <span class="s">'c.coffee'</span>

  <span class="nx">it</span> <span class="s">"should be opened in an editor"</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">atom</span><span class="p">.</span><span class="na">workspace</span><span class="p">.</span><span class="na">getActiveTextEditor</span><span class="p">().</span><span class="na">getPath</span><span class="p">()).</span><span class="na">toContain</span> <span class="s">'c.coffee'</span>

</code></pre></div>

<p>If you need to wait for multiple promises use a new <code>waitsForPromise</code> function for each promise. (Caution: Without <code>beforeEach</code> this example will fail!)</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"waiting for the packages to load"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">beforeEach</span> <span class="o">-&gt;</span>
    <span class="nx">waitsForPromise</span> <span class="o">-&gt;</span>
      <span class="nx">atom</span><span class="p">.</span><span class="na">workspace</span><span class="p">.</span><span class="na">open</span><span class="p">(</span><span class="s">'sample.js'</span><span class="p">)</span>

    <span class="nx">waitsForPromise</span> <span class="o">-&gt;</span>
      <span class="nx">atom</span><span class="p">.</span><span class="na">packages</span><span class="p">.</span><span class="na">activatePackage</span><span class="p">(</span><span class="s">'tabs'</span><span class="p">)</span>

    <span class="nx">waitsForPromise</span> <span class="o">-&gt;</span>
      <span class="nx">atom</span><span class="p">.</span><span class="na">packages</span><span class="p">.</span><span class="na">activatePackage</span><span class="p">(</span><span class="s">'tree-view'</span><span class="p">)</span>

  <span class="nx">it</span> <span class="s">'should have waited long enough'</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">atom</span><span class="p">.</span><span class="na">packages</span><span class="p">.</span><span class="na">isPackageActive</span><span class="p">(</span><span class="s">'tabs'</span><span class="p">)).</span><span class="na">toBe</span> <span class="no">true</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">atom</span><span class="p">.</span><span class="na">packages</span><span class="p">.</span><span class="na">isPackageActive</span><span class="p">(</span><span class="s">'tree-view'</span><span class="p">)).</span><span class="na">toBe</span> <span class="no">true</span>
</code></pre></div>

<p><code>waitsForPromise</code> can take an additional object argument before the function. The object can have the following properties:</p>

<ul>
<li>
<code>shouldReject</code> Whether the promise should reject or resolve (default: <code>false</code>)</li>
<li>
<code>timeout</code> The amount of time (in ms) to wait for the promise to be resolved or rejected (default: <code>process.env.CI ? 60000 : 5000</code>)</li>
<li>
<code>label</code> The label to display if promise times out (default: <code>'promise to be resolved or rejected'</code>)</li>
</ul>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"when we open a file"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">it</span> <span class="s">"should be opened in an editor"</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">waitsForPromise</span> <span class="p">{</span> <span class="na">shouldReject</span><span class="o">:</span> <span class="no">false</span><span class="p">,</span> <span class="na">timeout</span><span class="o">:</span> <span class="mi">5000</span><span class="p">,</span> <span class="na">label</span><span class="o">:</span> <span class="s">'promise to be resolved or rejected'</span> <span class="p">},</span> <span class="o">-&gt;</span>
      <span class="nx">atom</span><span class="p">.</span><span class="na">workspace</span><span class="p">.</span><span class="na">open</span><span class="p">(</span><span class="s">'c.coffee'</span><span class="p">).</span><span class="na">then</span> <span class="p">(</span><span class="nx">editor</span><span class="p">)</span> <span class="o">-&gt;</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">editor</span><span class="p">.</span><span class="na">getPath</span><span class="p">()).</span><span class="na">toContain</span> <span class="s">'c.coffee'</span>
</code></pre></div>

<h5>
<a id="asynchronous-functions-with-callbacks" class="anchor" href="#asynchronous-functions-with-callbacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Asynchronous Functions with Callbacks</h5>

<p>Specs for asynchronous functions can be done using the <code>waitsFor</code> and <code>runs</code> functions. A simple example.</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"fs.readdir(path, cb)"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">it</span> <span class="s">"is async"</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">spy</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="na">createSpy</span><span class="p">(</span><span class="s">'fs.readdirSpy'</span><span class="p">)</span>
    <span class="nx">fs</span><span class="p">.</span><span class="na">readdir</span><span class="p">(</span><span class="s">'/tmp/example'</span><span class="p">,</span> <span class="nx">spy</span><span class="p">)</span>

    <span class="nx">waitsFor</span> <span class="o">-&gt;</span>
      <span class="nx">spy</span><span class="p">.</span><span class="na">callCount</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="nx">runs</span> <span class="o">-&gt;</span>
      <span class="nx">exp</span> <span class="o">=</span> <span class="p">[</span><span class="no">null</span><span class="p">,</span> <span class="p">[</span><span class="s">'example.coffee'</span><span class="p">]]</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">spy</span><span class="p">.</span><span class="na">mostRecentCall</span><span class="p">.</span><span class="na">args</span><span class="p">).</span><span class="na">toEqual</span> <span class="nx">exp</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">spy</span><span class="p">).</span><span class="na">toHaveBeenCalledWith</span><span class="p">(</span><span class="no">null</span><span class="p">,</span> <span class="p">[</span><span class="s">'example.coffee'</span><span class="p">])</span>
</code></pre></div>

<p>For a more detailed documentation on asynchronous tests please visit the <a href="https://jasmine.github.io/1.3/introduction.html#section-Asynchronous_Support">Jasmine documentation</a>.</p>

<h4>
<a id="running-specs" class="anchor" href="#running-specs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running Specs</h4>

<p>Most of the time you'll want to run specs by triggering the <code>window:run-package-specs</code> command. This command is not only to run package specs, it can also be used to run Atom core specs when working on Atom itself. This will run all the specs in the current project's <code>spec</code> directory.</p>

<p>To run a limited subset of specs use the <code>fdescribe</code> or <code>fit</code> methods. You can use those to focus a single spec or several specs. Modified from the example above, focusing an individual spec looks like this:</p>

<div class="highlight highlight-coffee"><pre class="highlight"><code><span class="nx">describe</span> <span class="s">"when a test is written"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">fit</span> <span class="s">"has some expectations that should pass"</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">expect</span><span class="p">(</span><span class="s">"apples"</span><span class="p">).</span><span class="na">toEqual</span><span class="p">(</span><span class="s">"apples"</span><span class="p">)</span>
    <span class="nx">expect</span><span class="p">(</span><span class="s">"oranges"</span><span class="p">).</span><span class="na">not</span><span class="p">.</span><span class="na">toEqual</span><span class="p">(</span><span class="s">"apples"</span><span class="p">)</span>
</code></pre></div>

<h5>
<a id="running-on-ci" class="anchor" href="#running-on-ci" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running on CI</h5>

<p>It is now easy to run the specs in a CI environment like Travis and AppVeyor. See the <a href="https://blog.atom.io/2014/04/25/ci-for-your-packages.html">Travis CI For Your Packages</a> and <a href="http://blog.atom.io/2014/07/28/windows-ci-for-your-packages.html">AppVeyor CI For Your Packages</a> posts for more details.</p>

<h5>
<a id="running-via-the-command-line" class="anchor" href="#running-via-the-command-line" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running via the Command Line</h5>

<p>To run tests on the command line, run Atom with the <code>--test</code> flag followed by one or more paths to test files or directories. You can also specify a <code>--timeout</code> option, which will force-terminate your tests after a certain number of seconds have passed.</p>

<pre class="command-line">
atom --test --timeout 60 ./test/test-1.js ./test/test-2.js
</pre>

<h4>
<a id="customizing-your-test-runner" class="anchor" href="#customizing-your-test-runner" aria-hidden="true"><span class="octicon octicon-link"></span></a>Customizing your test runner</h4>

<div class="alert warning">

<p><strong>Warning:</strong> This API is available as of 1.2.0-beta0, and it is experimental and subject to change. Test runner authors should be prepared to test their code against future beta releases until it stabilizes.</p>

</div>

<p>By default, package tests are run with Jasmine 1.3, which is outdated but can't be changed for compatibility reasons. You can specify your own custom test runner by including an <code>atomTestRunner</code> field in your <code>package.json</code>. Atom will require whatever module you specify in this field, so you can use a relative path or the name of a module in your package's dependencies.</p>

<p>Your test runner module must export a single function, which Atom will call within a new window to run your package's tests. Your function will be called with the following parameters:</p>

<ul>
<li>
<code>testPaths</code> An array of paths to tests to run. Could be paths to files or directories.</li>
<li>
<code>buildAtomEnvironment</code> A function that can be called to construct an instance of the <code>atom</code> global. No <code>atom</code> global will be explicitly assigned, but you can assign one in your runner if desired. This function should be called with the following parameters:

<ul>
<li>
<code>applicationDelegate</code> An object responsible for Atom's interaction with the browser process and host OS. Use <code>buildDefaultApplicationDelegate</code> for a default instance. You can override specific methods on this object to prevent or test these interactions.</li>
<li>
<code>window</code> A window global.</li>
<li>
<code>document</code> A document global.</li>
<li>
<code>configDirPath</code> A path to the configuration directory (usually <code>~/.atom</code>).</li>
<li>
<code>enablePersistence</code> A boolean indicating whether the Atom environment should save or load state from the file system. You probably want this to be <code>false</code>.</li>
</ul>
</li>
<li>
<code>buildDefaultApplicationDelegate</code> A function that builds a default instance of the application delegate, suitable to be passed as the <code>applicationDelegate</code> parameter to <code>buildAtomEnvironment</code>.</li>
<li>
<code>logFile</code> An optional path to a log file to which test output should be logged.</li>
<li>
<code>headless</code> A boolean indicating whether or not the tests are being run from the command line via <code>atom --test</code>.</li>
<li>
<code>legacyTestRunner</code> This function can be invoked to run the legacy Jasmine runner, giving your package a chance to transition to a new test runner while maintaining a subset of its tests in the old environment.</li>
</ul>

<p>Your function should return a promise that resolves to an exit code when your tests are finish running. This exit code will be returned when running your tests via the command line.</p>
        </div>
      </div>
      <div class="footer-pad"></div>
    </div>
    <footer>
  <div class="footer">
    <div class="wrapper no-pad">
      <ul class="footer-left">
        <li><a href="https://atom.io/terms">Terms of Use</a></li>
        <li><a href="https://help.github.com/articles/github-privacy-policy/">Privacy</a></li>
        <li><a href="https://github.com/atom/atom/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
        <li><a href="https://atom.io/releases">Releases</a></li>
        <li><a href="https://atom.io/faq">FAQ</a></li>
        <li><a href="https://atom.io/contact">Contact</a></li>
        <li><a href="https://github.com/atom/flight-manual.atom.io/blob/master/CONTRIBUTING.md">Contribute!</a></li>
      </ul>

      <div class="footer-right">
        <a href="https://github.com"><span class="octicon octicon-code"></span> with <span class="octicon octicon-heart"></span> by <span class="octicon octicon-logo-github"></span></a>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>
